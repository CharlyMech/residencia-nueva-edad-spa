# Internationalization (i18n)

## Architecture

The i18n system uses a hybrid approach:
- **Server**: Astro renders static content in Spanish (default)
- **Client**: React components using `client:only="react"` render with user's preferred language

## Components

### Language Store (`src/stores/languageStore.ts`)
Zustand store managing language state. Initializes with 'es' to match server rendering.

### Language Sync (`src/components/LanguageSync.tsx`)
Client-only component that syncs user's language preference after page load.

### i18n Client Script (`src/scripts/i18n-client.ts`)
Updates Astro static elements with `data-i18n` attributes based on user's language.

## Adding a Language

1. Update `src/i18n/config.ts` with new language code
2. Add translations to `src/i18n/locales/{lang}.json`
3. Components automatically use new language via `useLanguageStore`

## Usage

### React Components
```typescript
import { useLanguageStore } from '@/stores/languageStore';

export default function MyComponent() {
  const { t } = useLanguageStore();
  return <div>{t('welcome.message')}</div>;
}
```

### Astro Components
```astro
---
import { useTranslations } from '@/i18n/utils';
const t = useTranslations('es');
---
<h1 data-i18n="welcome.message">{t('welcome.message')}</h1>
```

## Hydration Strategy

React components with translations use `client:only="react"` to avoid hydration mismatches. This ensures components render fresh on the client with the correct language, preventing server/client content differences.
