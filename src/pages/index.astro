---
import Layout from '@/layouts/Layout.astro';
import Header from '@/components/Header.astro';
import Accordion from '@/components/Accordion';
import Carousel from '@/components/Carousel';
import ContactForm from '@/components/ContactForm';
import { getCurrentLanguage, useTranslations } from '@/i18n/utils';
import { getConfig } from '@/services';
import AutoSlider from '@/components/AutoSlider';
import Card from '@/components/Card.astro';
import Footer from '@/components/Footer.astro';
import Map from '@/components/Map';
import { HeartIcon, ShieldCheckIcon } from '@heroicons/react/16/solid';

const lang = getCurrentLanguage();
const t = useTranslations(lang);
const config = getConfig();

const slidesData = [
	{
		imageUrl: 'https://images.unsplash.com/photo-1762955911431-4c44c7c3f408',
		title: 'slides.first.title',
		description: 'slides.first.description',
	},
	{
		imageUrl: 'https://images.unsplash.com/photo-1513159446162-54eb8bdaa79b',
		title: 'slides.second.title',
		description: 'slides.second.description',
	},
	{
		imageUrl: 'https://images.unsplash.com/photo-1762955911769-d652ceaa94bb',
		title: 'slides.third.title',
		description: 'slides.third.description',
	},
	{
		imageUrl: 'https://images.unsplash.com/photo-1765896387403-3e6e0e44d7cc',
		title: 'slides.fourth.title',
		description: 'slides.fourth.description',
	},
];

const accordionItems = [
	{
		id: 'assisted-living',
		title: 'services.assisted.title',
		content: 'services.assisted.description',
	},
	{
		id: 'memory-care',
		title: 'services.memory.title',
		content: 'services.memory.description',
	},
	{
		id: 'daily-activities',
		title: 'services.daily.title',
		content: 'services.daily.description',
	},
	{
		id: 'daily-activities-social',
		title: 'services.social.title',
		content: 'services.social.description',
	},
];

const schema = {
	'@context': 'https://schema.org',
	'@type': 'NursingHome',
	name: 'Residencia Nueva Edad',
	image: new URL('/og-image.jpg', Astro.site),
	'@id': 'https://residencianuevaedad.es',
	url: 'https://residencianuevaedad.es',
	telephone: config.phone,
	address: {
		'@type': 'PostalAddress',
		streetAddress: 'CL. GOYA, 7',
		addressLocality: 'Tudela de Duero',
		addressRegion: 'Valladolid',
		postalCode: '47320',
		addressCountry: 'ES',
	},
	geo: {
		'@type': 'GeoCoordinates',
		latitude: config.map.latitude,
		longitude: config.map.longitude,
	},
	openingHoursSpecification: {
		'@type': 'OpeningHoursSpecification',
		dayOfWeek: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
		opens: '00:00',
		closes: '23:59',
	},
	priceRange: '$$',
};
---

<script is:inline type="application/ld+json" set:html={JSON.stringify(schema)} />

<Layout
	title={`${config.siteName}`}
	description={config.siteDescription}
	lang={lang}
	keywords="residencia valladolid, residencia tudela de duero, residencia ancianos valladolid, cuidado mayores, residencia tercera edad"
>
	<Header />

	<main class="bg-bg-100 pt-16 md:pt-20">
		<section
			id="home"
			class="relative overflow-hidden bg-accent-cream/50 py-12 sm:py-16 md:py-20 lg:py-24"
		>
			<div class="container-custom relative z-10 mb-12 px-4 text-center sm:mb-16 md:mb-20">
				<h1
					class="mb-4 animate-fade-in font-heading text-3xl font-bold leading-tight text-neutral-800 dark:text-white sm:mb-5 sm:text-4xl md:mb-6 md:text-5xl lg:text-6xl"
					data-i18n="hero.title"
				>
					{t('hero.title')}
				</h1>
				<p
					class="mx-auto mb-6 max-w-3xl animate-slide-up text-base leading-relaxed text-neutral-700 dark:text-neutral-300 sm:mb-7 sm:text-lg md:mb-8 md:text-xl lg:text-2xl"
					data-i18n="hero.subtitle"
				>
					{t('hero.subtitle')}
				</p>
				<a
					href="#contact"
					class="btn-primary inline-block animate-slide-up rounded-full px-6 py-3 text-base text-white md:text-lg"
					data-i18n="hero.cta"
				>
					{t('hero.cta')}
				</a>
			</div>
			<div class="w-full">
				<AutoSlider
					slides={slidesData}
					autoRotateInterval={5000}
					direction="auto"
					client:only="react"
				/>
			</div>
		</section>

		<section id="about" class="py-16 sm:py-20 md:py-24">
			<div class="container-custom">
				<h2
					class="mb-12 text-center font-heading text-2xl font-bold text-neutral-800 dark:text-white sm:text-3xl md:mb-16 md:text-4xl lg:mb-20 lg:text-5xl"
					data-i18n="commitment.title"
				>
					{t('commitment.title')}
				</h2>

				<div
					class="mx-auto grid max-w-5xl grid-cols-1 gap-6 sm:gap-8 md:grid-cols-2 md:gap-10 lg:gap-12"
				>
					<Card hoverable={true} shadow="medium">
						<div class="p-6 text-center sm:p-8 md:p-10">
							<div
								class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-primary-100 dark:bg-primary-900/30 sm:h-20 sm:w-20 md:mb-6"
							>
								<HeartIcon className="size-[50px] text-primary-500" />
							</div>
							<h3
								class="mb-3 text-lg font-semibold text-neutral-800 dark:text-white sm:text-xl md:mb-4 md:text-2xl"
								data-i18n="commitment.care.title"
							>
								{t('commitment.care.title')}
							</h3>
							<p
								class="text-sm leading-relaxed text-neutral-600 dark:text-neutral-300 sm:text-base md:text-lg"
								data-i18n="commitment.care.description"
							>
								{t('commitment.care.description')}
							</p>
						</div>
					</Card>

					<Card hoverable={true} shadow="medium">
						<div class="p-6 text-center sm:p-8 md:p-10">
							<div
								class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-secondary-100 dark:bg-secondary-900/30 sm:h-20 sm:w-20 md:mb-6"
							>
								<ShieldCheckIcon className="size-[50px] text-secondary-500" />
							</div>
							<h3
								class="mb-3 text-lg font-semibold text-neutral-800 dark:text-white sm:text-xl md:mb-4 md:text-2xl"
								data-i18n="commitment.safety.title"
							>
								{t('commitment.safety.title')}
							</h3>
							<p
								class="text-sm leading-relaxed text-neutral-600 dark:text-neutral-300 sm:text-base md:text-lg"
								data-i18n="commitment.safety.description"
							>
								{t('commitment.safety.description')}
							</p>
						</div>
					</Card>
				</div>
			</div>
		</section>

		<section id="services" class="bg-accent-cream/50 py-16 sm:py-20 md:py-24">
			<div class="container-custom">
				<h2
					class="mb-12 text-center font-heading text-2xl font-bold text-neutral-800 dark:text-white sm:text-3xl md:mb-16 md:text-4xl lg:mb-20 lg:text-5xl"
					data-i18n="services.title"
				>
					{t('services.title')}
				</h2>

				<div class="mx-auto max-w-4xl px-4">
					<Accordion items={accordionItems} client:only="react" />
				</div>
			</div>
		</section>

		<section id="testimonials" class="py-16 sm:py-20 md:py-24">
			<div class="container-custom">
				<h2
					class="mb-12 text-center font-heading text-2xl font-bold text-neutral-800 dark:text-white sm:text-3xl md:mb-16 md:text-4xl lg:mb-20 lg:text-5xl"
					data-i18n="testimonials.title"
				>
					{t('testimonials.title')}
				</h2>

				<div class="mx-auto max-w-5xl px-4">
					<Carousel autoPlay={true} interval={6000} client:only="react" />
				</div>
			</div>
		</section>

		<section id="contact" class="bg-accent-cream/50 py-16 sm:py-20 md:py-24">
			<div class="container-custom">
				<h2
					class="mb-12 text-center font-heading text-2xl font-bold text-neutral-800 dark:text-white sm:text-3xl md:mb-16 md:text-4xl lg:mb-20 lg:text-5xl"
					data-i18n="contact.title"
				>
					{t('contact.title')}
				</h2>

				<div class="mx-auto max-w-6xl space-y-8 px-4 md:space-y-10 lg:space-y-12">
					<!-- Main Card: Form + WhatsApp -->
					<div class="card p-6 sm:p-8 md:p-10">
						<div class="grid grid-cols-1 gap-8 lg:grid-cols-3 lg:gap-10">
							<!-- Contact Form - Takes 2 columns -->
							<div class="lg:col-span-2">
								<ContactForm client:only="react" />
							</div>

							<!-- WhatsApp Card - Takes 1 column -->
							<div class="flex flex-col">
								<div
									class="card flex h-full flex-col justify-between bg-gradient-to-br from-[#25D366]/10 to-[#128C7E]/10 p-6 text-center dark:from-[#25D366]/20 dark:to-[#128C7E]/20"
								>
									<div class="flex flex-col items-center justify-center flex-1">
										<div
											class="mx-auto mb-6 flex h-20 w-20 items-center justify-center rounded-full bg-[#25D366] shadow-lg"
										>
											<!-- WhatsApp Icon SVG -->
											<svg
												class="h-12 w-12 text-white"
												fill="currentColor"
												viewBox="0 0 24 24"
												xmlns="http://www.w3.org/2000/svg"
											>
												<path
													d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"
												></path>
											</svg>
										</div>
										<h3
											class="mb-3 text-xl font-bold text-neutral-800 dark:text-white"
											data-i18n="contact.whatsapp.title"
										>
											{t('contact.whatsapp.title')}
										</h3>
										<p
											class="mb-6 text-base leading-relaxed text-neutral-700 dark:text-neutral-300"
											data-i18n="contact.whatsapp.subtitle"
										>
											{t('contact.whatsapp.subtitle')}
										</p>
									</div>
									<a
										href={`https://wa.me/${config.whatsapp}`}
										target="_blank"
										rel="noopener noreferrer"
										class="inline-flex items-center justify-center gap-2 rounded-xl bg-[#25D366] px-6 py-3 text-base font-semibold text-white shadow-md transition-all hover:bg-[#128C7E] hover:shadow-lg active:scale-95"
									>
										<svg
											class="h-5 w-5"
											fill="currentColor"
											viewBox="0 0 24 24"
											xmlns="http://www.w3.org/2000/svg"
										>
											<path
												d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"
											></path>
										</svg>
										<span data-i18n="contact.whatsapp.button">{t('contact.whatsapp.button')}</span>
									</a>
								</div>
							</div>
						</div>
					</div>

					<!-- Bottom Card: Contact Info + Map -->
					<div class="card p-6 sm:p-8 md:p-10">
						<div class="grid grid-cols-1 gap-8 lg:grid-cols-2 lg:gap-10">
							<!-- Contact Details -->
							<div class="flex flex-col justify-center">
								<div class="space-y-5 md:space-y-6">
									<div>
										<h4
											class="mb-2 text-sm font-semibold text-neutral-800 dark:text-white sm:text-base md:text-lg"
										>
											<span data-i18n="contact.address">{t('contact.address')}</span>:
										</h4>
										<p
											class="text-sm leading-relaxed text-neutral-600 dark:text-neutral-300 sm:text-base md:text-lg"
										>
											{config.address}
										</p>
									</div>
									<div>
										<h4
											class="mb-2 text-sm font-semibold text-neutral-800 dark:text-white sm:text-base md:text-lg"
										>
											<span data-i18n="contact.phone.label">{t('contact.phone.label')}</span>:
										</h4>
										<a
											href={`tel:${config.phone}`}
											class="text-sm text-primary-600 hover:underline dark:text-primary-400 sm:text-base md:text-lg"
										>
											{config.phone}
										</a>
									</div>
									<div>
										<h4
											class="mb-2 text-sm font-semibold text-neutral-800 dark:text-white sm:text-base md:text-lg"
										>
											<span data-i18n="contact.email.label">{t('contact.email.label')}</span>:
										</h4>
										<a
											href={`mailto:${config.email}`}
											class="break-all text-sm text-primary-600 hover:underline dark:text-primary-400 sm:text-base md:text-lg"
										>
											{config.email}
										</a>
									</div>
								</div>
							</div>

							<!-- Map -->
							<div class="card overflow-hidden">
								<Map
									client:load
									latitude={config.map.latitude}
									longitude={config.map.longitude}
									markerTitle={config.siteName}
								/>
							</div>
						</div>
					</div>
				</div>
			</div>
		</section>
	</main>

	<Footer />
</Layout>
